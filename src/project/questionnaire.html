<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MSK Questionnaire</title>
</head>
<body>
  <div id="q-container">
    <h1>Skin Questionnaire</h1>
    <form id="q-form">
      <!-- Questions here-->

      <div class="question-block">
        <h3>1. How does your skin feel after washing your face (without applying any products)? </h3>
        <label><input type="radio" name="q1" value="dry"> Tight or rough</label>
        <label><input type="radio" name="q1" value="oily"> Greasy or shiny</label>
        <label><input type="radio" name="q1" value="combo"> Oily in the T-zone, dry elsewhere</label>
    </div>

    <div class="question-block">
      <h3>2. Midday, your skin usually looks: </h3>
      <label><input type="radio" name="q2" value="dry"> Dull or flaky </label>
      <label><input type="radio" name="q2" value="oily"> Shiny all over</label>
      <label><input type="radio" name="q2" value="combo"> Shiny only on the forehead or nose </label>
  </div>

  <div class="question-block">
    <h3>3. How often do you experience breakouts? </h3>
    <label> <input type="radio" name="q3" value="dry"> Rarely</label>
    <label><input type="radio" name="q3" value="oily"> Frequently</label>
    <label><input type="radio" name="q3" value="combo"> Occasionally, especially in the T-zone </label>
  </div>

  <div class="question-block">
    <h3>4. How does your skin react to new products? </h3>
    <label><input type="radio" name="q4" value="dry"> It feels tight, irritated, or flaky</label>
    <label><input type="radio" name="q4" value="oily"> It has temporary reactions, such as tiny bumps or blackheads</label>
    <label><input type="radio" name="q4" value="combo"> It reacts different in certain areas </label>
  </div>

  <div class="question-block">
    <h3>5. In cold weather, your skin tends to: </h3>
    <label><input type="radio" name="q5" value="dry"> Become drier and more prone to irritation </label>
    <label><input type="radio" name="q5" value="oily"> Become oily and potentially breakout</label>
    <label><input type="radio" name="q5" value="combo"> Become unbalanced, with cheeks becoming tighter and other areas shiny </label>
  </div>

  <div class="question-block">
    <h3>6. When you wake up in the morning, your skin feels: </h3>
    <label><input type="radio" name="q6" value="dry"> Dry or peeling </label>
    <label><input type="radio" name="q6" value="oily"> Oily or shiny</label>
    <label><input type="radio" name="q6" value="combo"> Oily in some spots, normal in other</label>
  </div>

  <div class="question-block"></div>
    <h3>7. How often do you need to moisturize your face? </h3>
    <label><input type="radio" name="q7" value="dry"> Several times a day </label>
    <label><input type="radio" name="q7" value="oily"> Rarely</label>
    <label><input type="radio" name="q7" value="combo"> Once daily works fine </label>
  </div>

  <div class="question-block">
  </div>
    <h3>8. What type of cleanser feels best on your skin? </h3>
    <label><input type="radio" name="q8" value="dry"> Creamy or hydrating </label>
    <label><input type="radio" name="q8" value="oily"> Foaming or gel-based</label>
    <label><input type="radio" name="q8" value="combo"> Gentle foam or balancing types </label>
  </div>

  <div class="question-block"></div>
    <h3>9. Do you ever experience redness or irritation? </h3>
    <label><input type="radio" name="q9" value="dry"> Frequently </label>
    <label><input type="radio" name="q9" value="oily"> Rarely</label>
    <label> <input type="radio" name="q9" value="combo"> Only on certain parts of your face</label>
  </div>

  <div class="question-block"></div>
    <h3>10. How does your skin feel after applying moisturizer? </h3>
    <label><input type="radio" name="q10" value="dry"> Relieved, absorbs quickly </label>
    <label><input type="radio" name="q10" value="oily"> Heavier</label>
    <label><input type="radio" name="q10" value="combo"> Comfortable except on oily areas</label>
  </div>

  <div class="question-block"></div>
    <h3>11. What's your biggest skincare concern? </h3>
    <label><input type="radio" name="q11" value="dry"> Dryness and flakiness </label>
    <label><input type="radio" name="q11" value="oily"> Excess oil and acne</label>
    <label><input type="radio" name="q11" value="combo"> Managing both oily and dry areas</label>
  </div>

  <div class="question-block"></div>
    <h3>12. At the end of the day, your skin feels: </h3>
    <label><input type="radio" name="q12" value="dry"> Rough or tight </label>
    <label><input type="radio" name="q12" value="oily"> Slick or greasy</label>
    <label><input type="radio" name="q12" value="combo"> A mix of both in different zones</label>
  </div>

  <br></br>

    <button type = "submit">Submit Answers</button>
    </form>
  </div>
<script>
  document.getElementById("q-form").addEventListener("submit", (e) => {
      e.preventDefault();

      // Initialize scores
      let scores = { dry: 0, oily: 0, combo: 0 };

      // Loop through questions
      for (let i = 1; i <= 12; i++) {
        const answer = document.querySelector(`input[name="q${i}"]:checked`);
        if (answer) {
          scores[answer.value]++; // Add 1 to the selected skin type
        }
      }

      const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
      const [topType, topScore] = sorted[0];
      const [secondType, secondScore] = sorted[1];

      let skinType = topType; 

      //if top two types have the same score, combine them
      if (secondScore > 0 && Math.abs(topScore - secondScore) <= 1) {
          skinType = `${topType}-${secondType}`;
      }
      // Store result in localStorage so results.html can access it
      localStorage.setItem("skinType", skinType);

      // Redirect to results page
      window.location.href = `results.html?type=${skinType}`;
    });
  </script>
</body>
</html>
